<div class="ct-detail">
    <div *ngIf="breadcrumb" class="breadcrumb">
        <button class="breadcrumb-btn" mat-button (click)="navigateBack()">
            <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 13L1 7L7 1" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>  
            Browse Trials</button>
        <button class="breadcrumb-btn breadcrumb-btn--disable" mat-button disabled> /
            Trial Details</button>
    </div>
    <!-- div>
        <h2>{{clinicalTrialDetailObj?.name}}</h2>
    </div -->
    <div class="row">
        <div class="column">
            <!-- Clinical Trial Name -->
            <mat-card class="box">

                <div class="box-content">
                    <mat-card-title class="sectionHeadersTitle">Trial details</mat-card-title>
                    <button *ngIf="canEdit()" mat-raised-button class="editButton"
                        (click)="btnEdit();">
                        <!-- <mat-icon class="editButtonIcon">edit</mat-icon> -->
                        <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.1038 1.78074C13.3158 1.58647 13.5674 1.43236 13.8443 1.32722C14.1212 1.22208 14.418 1.16797 14.7177 1.16797C15.0174 1.16797 15.3142 1.22208 15.5911 1.32722C15.868 1.43236 16.1196 1.58647 16.3315 1.78074C16.5435 1.97501 16.7116 2.20565 16.8263 2.45947C16.941 2.7133 17 2.98535 17 3.2601C17 3.53484 16.941 3.80689 16.8263 4.06072C16.7116 4.31455 16.5435 4.54518 16.3315 4.73945L5.43807 14.7251L1 15.8346L2.21038 11.7664L13.1038 1.78074Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="editTitle">EDIT</span>
                    </button>
                </div>

                <mat-divider></mat-divider>

                <div class="mat-card-items">
                    <!-- Clinical Trial Name -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.name != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon" src="../backoffice/assets/trialNameIcon.png"
                            alt="Clinical trial name">
                    </div>
                    <mat-card-title>Clinical trial name</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.name}}</mat-card-subtitle>
                </mat-card-header>
                
                <!-- Condition -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.clinicalTrialMedicalConditions" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon" src="../backoffice/assets/conditionIcon.png"
                            alt="Condition">
                    </div>
                    <mat-card-title>Condition</mat-card-title>
                    <mat-card-subtitle *ngFor="let ctmc of clinicalTrialDetailObj?.clinicalTrialMedicalConditions" class="trialDetailSubtitle">{{ctmc.medicalCondition.name}}
                    </mat-card-subtitle>
                </mat-card-header>

                <!-- Purpose -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.purpose != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon" src="../backoffice/assets/purposeIcon.png"
                            alt="Purpose">
                    </div>
                    <mat-card-title>Purpose</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.purpose}}
                    </mat-card-subtitle>
                </mat-card-header>

                <!-- Phase -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.phase != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon" src="../backoffice/assets/phaseIcon.png"
                            alt="Phase">
                    </div>
                    <mat-card-title>Phase</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.phase}}</mat-card-subtitle>
                </mat-card-header>

                <!-- Time commitment -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.timeCommitment != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon"
                            src="../backoffice/assets/timeCommitmentIcon.png" alt="Time commitment">
                    </div>
                    <mat-card-title>Time commitment</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.timeCommitment}}
                    </mat-card-subtitle>
                </mat-card-header>

                <!-- Physical commitment -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.physicalCommitment != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon"
                            src="../backoffice/assets/physicalCommitmentIcon.png" alt="Physical commitment">
                    </div>
                    <mat-card-title>Physical commitment</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.physicalCommitment}}
                    </mat-card-subtitle>
                </mat-card-header>

                <!-- Travel stipends provided -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.travelStipends != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon"
                            src="../backoffice/assets/travelStipendsProvidedIcon.png" alt="Travel stipends provided">
                    </div>
                    <mat-card-title>Travel stipends provided</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.travelStipends}}
                    </mat-card-subtitle>
                </mat-card-header>

                <!-- Sponsors -->
                <mat-card-header *ngIf="clinicalTrialDetailObj?.sponsor?.name != null" class="trialDetailHeader">
                    <div mat-card-avatar><img class="trialDetailImageIcon" src="../backoffice/assets/sponsorsIcon.png"
                            alt="Sponsors">
                    </div>
                    <mat-card-title>Sponsors</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.sponsor?.name}}
                    </mat-card-subtitle>
                </mat-card-header>
                </div>

            </mat-card>
        </div>
        <div class="column">
            <mat-card class="rightSideBox">
                <div class="top-column">
                    <mat-card-title class="sectionHeadersTitle">Eligibility criteria</mat-card-title>
                
                    <div class="btn-card-group">
                        <button *ngIf="canEditCriteriaGhi()" mat-raised-button class="editButton"
                        (click)="btnEditCriteriaGhi();" title="Edit General Health Information criteria">
                        <!-- <mat-icon class="editButtonIcon">edit</mat-icon> -->
                        <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.1038 1.78074C13.3158 1.58647 13.5674 1.43236 13.8443 1.32722C14.1212 1.22208 14.418 1.16797 14.7177 1.16797C15.0174 1.16797 15.3142 1.22208 15.5911 1.32722C15.868 1.43236 16.1196 1.58647 16.3315 1.78074C16.5435 1.97501 16.7116 2.20565 16.8263 2.45947C16.941 2.7133 17 2.98535 17 3.2601C17 3.53484 16.941 3.80689 16.8263 4.06072C16.7116 4.31455 16.5435 4.54518 16.3315 4.73945L5.43807 14.7251L1 15.8346L2.21038 11.7664L13.1038 1.78074Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="editTitle">G.H.I.</span>
                    
                        </button>
                        
                        <button *ngIf="canEditCriteriaCondition()" mat-raised-button class="editButton"
                            (click)="btnEditCriteriaCondition();" title="Edit condition-specific criteria">
                            <!-- <mat-icon class="editButtonIcon">edit</mat-icon> -->
                            <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.1038 1.78074C13.3158 1.58647 13.5674 1.43236 13.8443 1.32722C14.1212 1.22208 14.418 1.16797 14.7177 1.16797C15.0174 1.16797 15.3142 1.22208 15.5911 1.32722C15.868 1.43236 16.1196 1.58647 16.3315 1.78074C16.5435 1.97501 16.7116 2.20565 16.8263 2.45947C16.941 2.7133 17 2.98535 17 3.2601C17 3.53484 16.941 3.80689 16.8263 4.06072C16.7116 4.31455 16.5435 4.54518 16.3315 4.73945L5.43807 14.7251L1 15.8346L2.21038 11.7664L13.1038 1.78074Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="editTitle">Condition Specific</span>
                        
                        </button>
                        
                        <button *ngIf="canEditCriteriaTrial()" mat-raised-button class="editButton"
                            (click)="btnEditCriteriaTrial();" title="Edit trial-specific criteria">
                            <!-- <mat-icon class="editButtonIcon">edit</mat-icon> -->
                            <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.1038 1.78074C13.3158 1.58647 13.5674 1.43236 13.8443 1.32722C14.1212 1.22208 14.418 1.16797 14.7177 1.16797C15.0174 1.16797 15.3142 1.22208 15.5911 1.32722C15.868 1.43236 16.1196 1.58647 16.3315 1.78074C16.5435 1.97501 16.7116 2.20565 16.8263 2.45947C16.941 2.7133 17 2.98535 17 3.2601C17 3.53484 16.941 3.80689 16.8263 4.06072C16.7116 4.31455 16.5435 4.54518 16.3315 4.73945L5.43807 14.7251L1 15.8346L2.21038 11.7664L13.1038 1.78074Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="editTitle">Trial Specific</span>
                        </button>
                    </div>
                </div>
                

                <mat-divider></mat-divider>
                
                <!-- Eligibility Criteria -->                
                <div #eligibilityCriteriaText class="eligibilityCriteriaText"
                    [class.suspended]="isEligibilityCriteriaExpanded===false"
                    [class.active]="isEligibilityCriteriaExpanded===true" contenteditable="false"
                    [innerHtml]="clinicalTrialDetailObj?.eligibilityCriteria">
                </div>

                <!-- mat-divider *ngIf="!hideEligibilityCriteriaExpanded"></mat-divider -->
                <!-- div *ngIf="!hideEligibilityCriteriaExpanded" class="moreDetailsEligibilityCriteriaDiv" matRipple
                    (click)="expandCollapseEligibityCriteria()">
                    <label class="moreDetailsEligibilityCriteria">{{this.isEligibilityCriteriaExpanded ? "Less details"
                        : "More details"}}</label>
                    <img class="moreDetailEligibilityCriteriaIcon"
                        [src]="this.isEligibilityCriteriaExpanded ? '../backoffice/assets/lessIcon.png' : '../backoffice/assets/addIcon.png'"
                        alt="Add Icon">
                </div -->

            </mat-card>

            <mat-card class="rightSideBox">
                <div class="top-column"><mat-card-title class="sectionHeadersTitle">Sites</mat-card-title>
                    <button *ngIf="canEdit()" mat-raised-button class="editButton"
                        (click)="btnEdit();">
                        <!-- <mat-icon class="editButtonIcon">edit</mat-icon> -->
                        <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.1038 1.78074C13.3158 1.58647 13.5674 1.43236 13.8443 1.32722C14.1212 1.22208 14.418 1.16797 14.7177 1.16797C15.0174 1.16797 15.3142 1.22208 15.5911 1.32722C15.868 1.43236 16.1196 1.58647 16.3315 1.78074C16.5435 1.97501 16.7116 2.20565 16.8263 2.45947C16.941 2.7133 17 2.98535 17 3.2601C17 3.53484 16.941 3.80689 16.8263 4.06072C16.7116 4.31455 16.5435 4.54518 16.3315 4.73945L5.43807 14.7251L1 15.8346L2.21038 11.7664L13.1038 1.78074Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="editTitle">EDIT</span>
                    </button></div>
                
                <mat-divider></mat-divider>

                <mat-list>
                    <mat-list-item class="siteItem" *ngFor="let cs of clinicalSites; index as i">
                        <div mat-line>
                            <div class="map-container">
                                <div class="map-frame">
                                    <div [id]='"map"+i' class="map-div"></div>
                                </div>
                            </div>
                        </div>
                        <div mat-line class="siteSectionName">{{cs.name}}</div>
                        <div mat-line class="siteAddress">{{cs.address.location.description}}</div>
                    </mat-list-item>
                </mat-list>
                <mat-divider></mat-divider>

                <mat-card-header *ngIf="clinicalTrialDetailObj?.status?.description" class="trialDetailHeader map-footer">
                    <mat-card-title>Status</mat-card-title>
                    <mat-card-subtitle class="trialDetailSubtitle">{{clinicalTrialDetailObj?.status?.description}}
                    </mat-card-subtitle>
                </mat-card-header>

            </mat-card>
        </div>
    </div>
</div>