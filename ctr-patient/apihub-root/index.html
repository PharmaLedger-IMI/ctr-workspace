<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clinical Trials Recruitment Demo</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <script>var plEnvironment = (window.location.href && window.location.href.indexOf("localhost")>=0)
        ? ' localhost'
        : (window.location.href && window.location.href.indexOf("-dev.pharmaledger.")>=0)
        ? ' DEV'
        : '';
        document.title = document.title + plEnvironment;
    </script>
</head>
<body>
    <div>
        <h1><img src="assets/images/pharmaledgerLogo.png" alt="Pharmaledger" style="height: 2em; vertical-align: middle; margin-right: 1em;">Clinical Trials Recruitment
            Demo<script>document.write(plEnvironment);</script></h1>

        <p>Demonstration of clinical trials recruitment, using blockchain - through
            <a href="http://opendsu.com" target="_blank">OpenDSU</a> technology.</p>
    </div>

    <div class="center-aligned-controls vertical-align">

        <a class="patient_button scale-up" href="patient-ssapp/loader/" target="_blank">
            <div class="left-side">
                <img src="assets/images/patient.png" alt="Patient-app">
            </div>
            <div class="right-side">
                <p>Patient Wallet</p>
            </div>
        </a>

        <a class="site_button scale-up" href="/backoffice/dashboard?type=ClinicalSiteUser&v=0.4.13" target="_blank">
            <div class="left-side">
                <img src="assets/images/vialTube-h200px.png" alt="Backoffice for Clinical Sites">
            </div>
            <div class="right-side">
                <p>App for Clinical Sites</p>
            </div>
        </a>

        <a class="physician_button scale-up" href="/backoffice/dashboard?type=PhysicianUser&v=0.4.13" target="_blank">
            <div class="left-side">
                <img src="assets/images/sthetoscope-h980px.png" alt="Backoffice for Physicians">
            </div>
            <div class="right-side">
                <p>App for Physicians</p>
            </div>
        </a>

        <a class="sponsor_button scale-up" href="/backoffice/dashboard?type=SponsorUser&v=0.4.13" target="_blank">
            <div class="left-side">
                <img src="assets/images/building-h200px.png" alt="Backoffice for Sponsors">
            </div>
            <div class="right-side">
                <p>App for Sponsors</p>
            </div>
        </a>

        <a class="web-wallet_button scale-up" href="dsu-explorer/loader/" target="_blank">
            <div class="left-side">
                <img src="assets/images/cube.png" alt="DSU-Explorer">
            </div>
            <div class="right-side">
                <p>DSU Explorer</p>
            </div>
        </a>
        
        <a class="formbuilder_button scale-up" href="https://fb-dev.pharmaledger.pdmfc.com/" target="_blank">
            <div class="left-side">
                <img src="assets/images/formbuilder-h200px.png" alt="LHNCBC Form Builder">
            </div>
            <div class="right-side">
                <p>LHNCBC Form Builder</p>
            </div>
        </a>
    </div>
    <div>
        <p>The <span style="font-style: italic;">Patient Wallet</span> above (which should be
         easily compiled to native mobile Android/iOS application) is a Progressive Web Application
         compatible with modern (>2016) mobile browsers.
         The <span style="font-style: italic;">Backoffice Centralized Application</span> is a regular web application,
         compatible with modern browsers (both desktop and mobile , >2016).
        </p>

        <h2>v0.4.14 Release notes 2021-07-13</h2>

        <h3>Test Script - Observe the matching criteria details</h3>
        <ol>
            <li>Open the "Patient Wallet", and login with default credentials.</li>
            <li>"FIND A TRIAL",</li>
            <li>On step 1, feel free to modify the General Health Information data for testing purpose, and press "NEXT".</li>
            <li>On step 2, on the "What is the condition that you want to find a clinical trial for?" question, type / auto-complete "Ankylosing Spondylitis".</li>
            <li>Still on step 2, on the "Where are you located?" question type / auto-complete "Madrid" ("Center of Madrid, Spain"), and "How far are you willing to travel?" 10Km or more. (If you type any unkown location, travel distance will be ignored.). Press "NEXT".</li>
            <li>On steps 3 and 4 you should see the (adapted) questions for the CAIN457P12301_Ankylosing Spondylitis trial. Answer as you see fit, to evaluate the matching criteria. (Some questions only appear depending on the answer to previous questions). Press SUBMIT on step 4.</li>
            <li>On the "App for Clinical Sites", login with user siteclerck1@someclinicalsite1.org, password 123456.</li>
            <li>On the menu Administration, MatchRequest, observe the "List of Match Requests" that have been submitted (and the timestamp for submission).</li>
            <li>Clicking on the SSI of the Match Request see the details of the Match Request. For every question that is not informative there is a "<span style="color: darkgreen;">CRITERIA MATCH</span>" or "<span style="color: red;">CRITERIA REJECT</span>" just below the question). There is an overall status at the end.</li>
        </ol>
        Major Defects (compared to planned M5+M6):
        <ul>
            <li>On the "Patient Wallet":
                <ul>
                    <li>The match result is not yet communicated back to the patient.</li>
                    <li>The General Health Conditions are not yet used to rule-out trials. (Example: Age under 18 does not exclude any trial from "FIND TRIAL" so far).</li>
                    <li>Browse trials feature is only partially operational.</li>
                </ul>
            </li>
            <li>On the backoffice "Apps":
                <ul>
                    <li>Few features available to manage submitted match request (just list submitted requests, and check match criteria).</li>
                    <li>No feature to manage trials.</li>
                    <li>There is a question form editor, but it is not integrated in the backoffice. Trial instalation, and criteria conditions must configured by a DB technician.</li>
                </ul>
            </li>
        </ul>

        Pre-created (backoffice) users for test purposes:
        <ul>
            <li>Clinical Site User (with admin privileges to see match requests): siteclerck1@someclinicalsite1.org (password 123456) at a site in Lisbon.</li>
            <li>Physician User: physician1@someorganization.org (password 123456) at a site in Lisbon.</li>
        </ul>

        Patient wallet:
        <ul>
            <li>Dashboard displays list of submitted match requests.</li>
        </ul>

        (Backoffice) App for Physicians:
        <ul>
            <li>Sign Up now has Terms and Conditions.</li>
        </ul>

        <p><a href="/borest/api">OpenAPI</a> changes:
            <ul>
                <li>/borest/ctrial/clinicaltrial
                    <ul>
                        <li>clinical trials now have an array of association to medicalcondition. See new property clinicalTrialMedicalConditions.</li>
                        <li>New search parameters medicalConditioName and medicalConditionCode.</li>
                        <li>New properties: nctNumber: string optional ; travDistMiles: number, only defined when the query asks for the travel distance (earth globe distance) to a given point.</li>
                        <li>New properties: purpose, phase, timeCommitment, physicalCommitment, travelStipends, eligibilityCriteria. (eligibilityCriteria should be interpreted as HTML).</li>
                    </ul>
                </li>
                <li>/borest/ctrial/medicalcondition - (non-paged - as there are only a few thousands) list all medical conditions (internal code - based on https://clinicaltables.nlm.nih.gov/api/conditions/v3/search and name) - similar to /borest/lforms/medicalconditions but using the schema conventions of the rest of /borest/ctrial services. Property code type changed from number (bigint) to string.</li>
                <li>/borest/ctrms - match services (ongoing)</li>
                <li>/borest/lforms - unauthenticated services for public list-of-values used for auto-completion (ongoing)</li>
            </ul>
        </p>

        <h2>v0.3.8 Release notes 2021-06-07</h2>

        General test guidelines (submit a match request, and verify it on the blockchain):
        <ol>
            <li>Open the <img src="assets/images/patient.png" style="height: 1em;"><a href="/patient-ssapp/loader/" target="_blank">Patient Wallet</a>.</li>
            <li>Press LOGIN.<br />
                <span style="font-size: smaller;">(If you want to use your own account, change one of the wallet key parameters, press REGISTER, and then press LOGIN.)</span>
            </li>
            <li>Press FIND A TRIAL.</li>
            <li>Fill out all the steps until step 4. <br />
                <span style="font-size: smaller;">(Regardless of the medical condition chosen, all the questions in steps 3 and 4 will be related to Rheumatoid Arthritis.)</span>
            </li>
            <li>After the final step, take note of the <span style="color: red;">keySSI</span> given.</li>
            <li>Open the <img src="assets/images/cube.png" style="height: 1em;"><a href="/dsu-explorer/loader/" target="_blank">DSU Explorer</a>.</li>
            <li>"+ Add", "Receive Dossier".
                <ol>
                    <li>Name the dossier - any filename you choose.</li>
                    <li>Enter Dossier SEED - paste the <span style="color: red;">keySSI</span> shown before.</li>
                    <li>Expand the filename.</li>
                    <li>Expand the info folder.</li>
                    <li>See the match request data represented in JSON notation.</li>
                </ol>
            </li>
            <li>Other Patient functionality is not yet operational.</li>
        </ol>
        <p><a href="/borest/api">OpenAPI</a> changes:
            <ul>
                <li>In the Schemas section, the ClinicalSite now has an Address.</li>
                <li>In the Schemas section, each Address now has one Location.</li>
                <li>One Location now represents a GPS coordinate.</li>
                <li><a href="/borest/api/#/Location/LocationController_search">GET /borest/ctrial/location</a> - has a number of input parameters</a> which allows to filter results of known GPS locations used in addresses (amongst other locations). Filter by center=true to get only known city centers. Results are paginated. </li>
                <li><a href="/borest/api/#/ClinicalTrialStatus/ClinicalTrialStatusController_findAll">GET /borest/ctrial/clinicaltrialstatus</a> - list all possible trial main-lifecycle status codes. </li>
                <li><a href="/borest/api/#/ClinicalTrial/ClinicalTrialController_search">GET /borest/ctrial/clinicaltrial</a> - has a number of input parameters</a> which allows to filter results of clinical trials. Results are paginated (see the output schema and also the PaginatedDto where "results" is an array of ClinicalTrial).
                    <ul>
                        <li>count - the total number of results found in the database by this query.</li>
                        <li>query - an object with all input filter parameters</li>
                        <li>results - an array of ClinicalSite, with at most query.limit elements, starting at page query.page.</li>
                    </ul>
                    (The PaginatedDto is a breaking change from previous version).
                    <p>The name and description properties have been moved out of ClinicalTrual.dsuData and are now top level properties. (This is also a breaking change).</p>
                </li>
                <li><a href="/borest/api/#/Authentication/AuthController_login">POST /borest/auth/login</a> now accepts an optional type parameter.
                    If the type parameter its present, then its value must match the type parameter given in the POST /borest/auth/signup for that user.
                    Future releases may make this parameter <span style="font-weight: bold;">mandatory</span>.
                    No changes done to POST /borest/auth/get/current and neither to the JWT payload which contains only the id and username properties.</li>
            </ul>
        </p>
        <p><span style="font-weight: bold;">For ease of testing/development</span>, authentication is turned off on /borest/ctrial/location, clinicaltrial and clinicaltrialstatus services, for the time being.</p>

        <p>
            <span style="font-weight: bold;">Suggestion</span> to implement the search for clinical trials:
            <ul>
                <li>Use /borest/ctrial/location filtered by center=true to have a list of major city centers, as the starting location for the travel distance.</li>
                <li>Use /borest/ctrial/clinicaltrialstatus to have a list of the ClinicalTrial lifecycle status. (Probably not all status are visible to all actors, but for now, this may be ignored).</li>
                <li>There is no list of medical conditions. To perform a search of clinical trials by medical condition, PDM suggests filtering by description.</li>
            </ul>
        </p>
        <p>Backoffice apps updated with Prateek's signup feature.</p>

        <p>The data about the institutions listed (univesities and hospitals) is public, but has been used for development purposes <span style="font-weight: bold;">without their permission</span>.</p>

        <h2>v0.2.6 Release notes 2021-05-13</h2>
        
        <p><a href="/borest/api">OpenAPI</a> changes:
            <ul>
                <li>POST /borest/auth/signup - has new mandatory parameter type, with possible values ClinicalSiteUser, PhysicianUser, SponsorUser. Fixed input schema documentation.</li>
                <li>GET /borest/ctrial/clinicaltrial - (experimental) list of clinical trials. No exclusion criteria, all trials are listed. The "name" and "description" properties are inside the dsuData object. Missing multiple ClinicalSite associations (it should be an array, not a single propert).</li>
                <li>Fixed input parameter documentation on GET methods.</li>
            </ul>
        </p>
        <p>Backoffice renamed to App.</p>
        <p>Backoffice app entry links changed to /dashboard?type=UserClass</p>
        <p>Health Information demonstrates a Personal Health Information form, using <a href="http://lhncbc.github.io/lforms/">LForms</a>.
            Health information can be edited, again.
            <br /><span style="font-weight: bold;">The user should not be able to access the dashboard
                without saving a updated health information form.</span>
            <br />Pros/Cons identified so far:
            <ul>
                <li>Business</li>
                <ul>
                    <li>+ The library is free, with a BSD-style <a href="https://github.com/lhncbc/lforms/blob/master/LICENSE.md">license</a>.
                    <li>+ The form questions are defineable in JSON format (editable on a text editor).</li>
                    <li>+ There is an open-source code application <a href="https://github.com/lhncbc/formbuilder-lhcforms">https://github.com/lhncbc/formbuilder-lhcforms</a> for editing form definitions, and an online-tool to edit the form definitions at <a href="https://lhcformbuilder.nlm.nih.gov/">https://lhcformbuilder.nlm.nih.gov/</a>.</li>
                    <li>+ There is "local" version of that application/tool at <img src="assets/images/formbuilder-h200px.png" style="height: 1em;"> <a href="https//fb-dev.pharmaledger.pdmfc.com">https//fb-dev.pharmaledger.pdmfc.com</a> which provides some confidentiality for the user, provided you don't use external option lists. (<del>- There tool above provides no privacy and no warranty of availability.</del>)</li>
                    <ul>
                        <li>Current <span style="font-weight: bold;">Personal Health Information</span> form definition can be downloaded from <a href="https://raw.githubusercontent.com/PharmaLedger-IMI/ctr-workspace/v0.2.8/ctr-patient/ctr-dsu-wizard/formDefs/ghi.json">https://raw.githubusercontent.com/PharmaLedger-IMI/ctr-workspace/v0.2.8/ctr-patient/ctr-dsu-wizard/formDefs/ghi.json</a> and edited on the tool above.</li>
                    </ul>
                    <li>+ The form capabilities seem powerfull enough (several field types including dates, autocomplete-assisted choices, color customization, horizontal/vertical/grid layouts...).</li>
                    <li>- The design of the displayed form does not match the intended clickeable prototype design, and all the questions need to be displayed at the same time. <span style="font-size: smaller;">(Future developments may fix that, but the effort required is still unestimated).</span>.</li>
                </ul>
                <li>Technical</li>
                <ul>
                    <li>- lforms v29.0.3 in patient-ssap v0.2.0 In groups of questions where many items can be added, removing an item (by pressing "-") freezes the browser tab (tested on Firefox and Chrome) and freezes the whole OpenDSU application. (Does not happen on https://lhcformbuilder.nlm.nih.gov/ ). (<span style="color: red;">Critical</span>).</span></p></li>
                    <li>+ Updated frequently.</li>
                </ul>
            </ul>
        </p>
    <p>Patient wallet has ePi application replaced by OpenDSU Patient App Skeleton. (On-Going).</p>

        <h2>v0.0.15 Release notes 2021-04-28</h2>

        <ul>
            <li>New backoffice links (experimental) for Clinical Sites, Physicians, and Sponsor.</li>
            <li><a href="/borest/api">OpenAPI</a> new methods:
                <ul>
                    <li>GET /borest/ctrial/appuser - list all existing users.</li>
                    <li>GET /borest/ctrial/clinicalsite - has been made public (no authentication required) so that sites may be listed for signup.</li>
                    <li>GET /borest/ctrial/sponsor - has been made public (no authentication required) so that sponsors may be listed for signup. An icon URI path "logo" is also available for every one.</li>
                    <li>POST /borest/auth/signup - signs up a new user, and associates it with a ClinicalSite or a Sponsor. Also sets up the initial JWT authentication token, so that signed-up users are automatically logged-in. Error descriptions are returned in the HTTP 500 error message.</li>
                    <li>POST /borest/auth/login - was changed to also returns the firstName and lastName attributes.</li>
                </ul>
                Please check the "schemas" of the request/response objects and comments for details on the JSON request/responses.
            </li>
        </ul>

        <h2>Release notes 2021-04-12</h2>

        <p><span style="font-weight: bold;">WARNING:</span> Unstable software and environments. Use at your own risk! Data persistence at risk of unexpected reset!</p>

        <p>Application description / testing instructions</p>
        <ul>
            <li><img src="assets/images/patient.png" style="height: 1em;"> Patient Wallet App:
                <ol>
                    <li>On the first usage, you need to register a username password to open the wallet. (Re-used from ePi)</li>
                    <li>After this initial register steps, the Patient may ....</li>
                </ol>
            </li>
            <li><img src="assets/images/pharmacy.png" style="height: 1em;"> Backoffice Centralized Application:
                <ol>
                    <li>Follow instructions on the login page</li>
                </ol>
            </li>
            <li><img src="assets/images/cube.png" style="height: 1em;"> DSU Explorer - debug tool to explore DSUs anchored on the blockchain (Re-used from ePi).</li>
        </ul>
        Wallets do not communicate yet, so nothing done on one wallet is visible on other wallets.

        <p>Milestones achieved on this release, compared to the plan 2021-07-21_ImplementationPlanMVPClinicalTrialRecruitment-V2:</p>
        <ul>
            <li>M1 OpenDSU Solution Concept Complete - work in progress in DSU constitution and attributes.</li>
            <li>M2 Development Environment Setup Complete - complete 100% - development environment available at <a href="https://ctr-dev.pharmaledger.pdmfc.com/">https://ctr-dev.pharmaledger.pdmfc.com/</a>.</li>
            <li>M3 Business Test Environment Setup Complete - complete 100% - environment available at <a href="https://ctr.pharmaledger.pdmfc.com/">https://ctr.pharmaledger.pdmfc.com/</a>.</li>
        </ul>

        <p>PDM welcomes technical contributions at <a href="https://github.com/PharmaLedger-IMI/ctr-workspace">https://github.com/PharmaLedger-IMI/ctr-workspace</a></p>
    </div>
    <footer>
        v<!-- VERSION_START -->0.4.6-gd6aea2a<!-- VERSION_END --> &copy;&nbsp;2021 <a href="http://pharmaledger.eu">Pharmaledger.eu</a> - All Rights Reserved. 
    </footer>
</body>

</html>
